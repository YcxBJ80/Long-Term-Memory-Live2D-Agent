[32m[INFO][0m [1mRunning in standard mode. For detailed debug logs, use: uv run run_server.py --verbose[0m
[32m2025-10-09 18:19:24[0m | [1mINFO    [0m | [36m__main__[0m:[36mrun[0m:[36m122[0m | Open-LLM-VTuber, version v1.2.1
[32m2025-10-09 18:19:24[0m | [1mINFO    [0m | [36mupgrade_codes.config_sync[0m:[36mbackup_user_config[0m:[36m100[0m | Backing up conf.yaml to conf.yaml.backup
[32m2025-10-09 18:19:24[0m | [1mINFO    [0m | [36m__main__[0m:[36mrun[0m:[36m149[0m | Initializing server context...
[32m2025-10-09 18:19:24[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.service_context[0m:[36m_init_memu_manager[0m:[36m340[0m | memU integration enabled (base_url=%s, user=%s, agent=%s)
[32m2025-10-09 18:19:24[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.service_context[0m:[36minit_live2d[0m:[36m437[0m | Initializing Live2D: mao_pro
[32m2025-10-09 18:19:24[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.live2d_model[0m:[36m_lookup_model_info[0m:[36m142[0m | Model Information Loaded.
[32m2025-10-09 18:19:24[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.service_context[0m:[36minit_asr[0m:[36m447[0m | Initializing ASR: sherpa_onnx_asr
[32m2025-10-09 18:19:24[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.asr.sherpa_onnx_asr[0m:[36m__init__[0m:[36m81[0m | Sherpa-Onnx-ASR: Using cpu for inference
[32m2025-10-09 18:19:26[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.service_context[0m:[36minit_tts[0m:[36m459[0m | Initializing TTS: edge_tts
[32m2025-10-09 18:19:26[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.service_context[0m:[36minit_vad[0m:[36m471[0m | VAD is disabled.
[32m2025-10-09 18:19:26[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.service_context[0m:[36mload_from_config[0m:[36m303[0m | Initializing shared ServerRegistry within load_from_config.
[32m2025-10-09 18:19:26[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.service_context[0m:[36mload_from_config[0m:[36m307[0m | Initializing shared ToolAdapter within load_from_config.
[32m2025-10-09 18:19:26[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.service_context[0m:[36m_init_mcp_components[0m:[36m120[0m | ServerRegistry initialized or referenced.
[32m2025-10-09 18:19:26[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.tool_adapter[0m:[36mget_tools[0m:[36m223[0m | MC: Running dynamic tool construction for servers: ['time', 'ddg-search']
[32m2025-10-09 18:19:26[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36m__init__[0m:[36m41[0m | MCPC: Initialized MCPClient instance.
[32m2025-10-09 18:19:26[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36m_ensure_server_running_and_get_session[0m:[36m50[0m | MCPC: Starting and connecting to server 'time'...
Downloading pydantic-core (1.8MiB)
 Downloading pydantic-core
Installed 29 packages in 43ms
[32m2025-10-09 18:19:28[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36m_ensure_server_running_and_get_session[0m:[36m75[0m | MCPC: Successfully connected to server 'time'.
[32m2025-10-09 18:19:28[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36m_ensure_server_running_and_get_session[0m:[36m50[0m | MCPC: Starting and connecting to server 'ddg-search'...
Installed 35 packages in 30ms
[32m2025-10-09 18:19:30[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36m_ensure_server_running_and_get_session[0m:[36m75[0m | MCPC: Successfully connected to server 'ddg-search'.
[10/09/25 18:19:30] INFO     Processing request of type            server.py:664
                             ListToolsRequest                                   
[32m2025-10-09 18:19:30[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36maclose[0m:[36m159[0m | MCPC: Closing client instance and 2 active connections...
[32m2025-10-09 18:19:30[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36maclose[0m:[36m166[0m | MCPC: Client instance closed.
[32m2025-10-09 18:19:30[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.tool_adapter[0m:[36mget_tools[0m:[36m231[0m | MC: Dynamic tool construction complete.
[32m2025-10-09 18:19:30[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.service_context[0m:[36m_init_mcp_components[0m:[36m138[0m | Dynamically generated MCP prompt string (length: 2085).
[32m2025-10-09 18:19:30[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.service_context[0m:[36m_init_mcp_components[0m:[36m141[0m | Dynamically formatted tools - OpenAI: 4, Claude: 4.
[32m2025-10-09 18:19:30[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36m__init__[0m:[36m41[0m | MCPC: Initialized MCPClient instance.
[32m2025-10-09 18:19:30[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36m_ensure_server_running_and_get_session[0m:[36m50[0m | MCPC: Starting and connecting to server 'time'...
[32m2025-10-09 18:19:30[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36m_ensure_server_running_and_get_session[0m:[36m75[0m | MCPC: Successfully connected to server 'time'.
[32m2025-10-09 18:19:30[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36m_ensure_server_running_and_get_session[0m:[36m50[0m | MCPC: Starting and connecting to server 'ddg-search'...
[32m2025-10-09 18:19:31[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36m_ensure_server_running_and_get_session[0m:[36m75[0m | MCPC: Successfully connected to server 'ddg-search'.
[10/09/25 18:19:31] INFO     Processing request of type            server.py:664
                             ListToolsRequest                                   
[32m2025-10-09 18:19:31[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36maclose[0m:[36m159[0m | MCPC: Closing client instance and 2 active connections...
[32m2025-10-09 18:19:31[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36maclose[0m:[36m166[0m | MCPC: Client instance closed.
[32m2025-10-09 18:19:31[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.tool_manager[0m:[36m__init__[0m:[36m28[0m | ToolManager initialized with 4 OpenAI tools and 4 Claude tools.
[32m2025-10-09 18:19:31[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.service_context[0m:[36m_init_mcp_components[0m:[36m155[0m | ToolManager initialized with dynamically fetched tools.
[32m2025-10-09 18:19:31[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36m__init__[0m:[36m41[0m | MCPC: Initialized MCPClient instance.
[32m2025-10-09 18:19:31[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.service_context[0m:[36m_init_mcp_components[0m:[36m170[0m | MCPClient initialized for this session.
[32m2025-10-09 18:19:31[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.service_context[0m:[36m_init_mcp_components[0m:[36m180[0m | ToolExecutor initialized for this session.
[32m2025-10-09 18:19:31[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.service_context[0m:[36m_init_mcp_components[0m:[36m187[0m | StreamJSONDetector initialized for this session.
[32m2025-10-09 18:19:31[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.service_context[0m:[36minit_agent[0m:[36m488[0m | Initializing Agent: basic_memory_agent
[32m2025-10-09 18:19:31[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.agent.agent_factory[0m:[36mcreate_agent[0m:[36m37[0m | Initializing agent: basic_memory_agent
[32m2025-10-09 18:19:31[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.agent.stateless_llm_factory[0m:[36mcreate_llm[0m:[36m23[0m | Initializing LLM: lmstudio_llm
[32m2025-10-09 18:19:31[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.agent.stateless_llm.openai_compatible_llm[0m:[36m__init__[0m:[36m56[0m | Initialized AsyncLLM with the parameters: http://127.0.0.1:1234/v1, qwen3-30b-a3b-2507
[32m2025-10-09 18:19:31[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.agent.agents.basic_memory_agent[0m:[36m__init__[0m:[36m112[0m | BasicMemoryAgent initialized.
[32m2025-10-09 18:19:31[0m | [1mINFO    [0m | [36m__main__[0m:[36mrun[0m:[36m152[0m | Server context initialized successfully.
[32m2025-10-09 18:19:31[0m | [1mINFO    [0m | [36m__main__[0m:[36mrun[0m:[36m158[0m | Starting server on localhost:12393
INFO:     Started server process [8337]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://localhost:12393 (Press CTRL+C to quit)
INFO:     ::1:51020 - "GET / HTTP/1.1" 200 OK
INFO:     ::1:51020 - "GET /assets/main-CKgUHFa9.js HTTP/1.1" 200 OK
INFO:     ::1:51021 - "GET /assets/main-QEkl09-0.css HTTP/1.1" 200 OK
INFO:     ::1:51020 - "GET /libs/live2dcubismcore.js HTTP/1.1" 200 OK
INFO:     127.0.0.1:51024 - "GET /bg/ceiling-window-room-night.jpeg HTTP/1.1" 304 Not Modified
INFO:     127.0.0.1:51025 - "WebSocket /client-ws" [accepted]
[32m2025-10-09 18:19:43[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.service_context[0m:[36m_init_mcp_components[0m:[36m120[0m | ServerRegistry initialized or referenced.
[32m2025-10-09 18:19:43[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.tool_adapter[0m:[36mget_tools[0m:[36m223[0m | MC: Running dynamic tool construction for servers: ['time', 'ddg-search']
[32m2025-10-09 18:19:43[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36m__init__[0m:[36m41[0m | MCPC: Initialized MCPClient instance.
[32m2025-10-09 18:19:43[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36m_ensure_server_running_and_get_session[0m:[36m50[0m | MCPC: Starting and connecting to server 'time'...
INFO:     connection open
INFO:     ::1:51020 - "GET /favicon.ico HTTP/1.1" 200 OK
INFO:     ::1:51020 - "GET /undefined/undefined.model3.json HTTP/1.1" 404 Not Found
[32m2025-10-09 18:19:44[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36m_ensure_server_running_and_get_session[0m:[36m75[0m | MCPC: Successfully connected to server 'time'.
[32m2025-10-09 18:19:44[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36m_ensure_server_running_and_get_session[0m:[36m50[0m | MCPC: Starting and connecting to server 'ddg-search'...
[32m2025-10-09 18:19:44[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36m_ensure_server_running_and_get_session[0m:[36m75[0m | MCPC: Successfully connected to server 'ddg-search'.
[10/09/25 18:19:44] INFO     Processing request of type            server.py:664
                             ListToolsRequest                                   
[32m2025-10-09 18:19:44[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36maclose[0m:[36m159[0m | MCPC: Closing client instance and 2 active connections...
[32m2025-10-09 18:19:45[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36maclose[0m:[36m166[0m | MCPC: Client instance closed.
[32m2025-10-09 18:19:45[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.tool_adapter[0m:[36mget_tools[0m:[36m231[0m | MC: Dynamic tool construction complete.
[32m2025-10-09 18:19:45[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.service_context[0m:[36m_init_mcp_components[0m:[36m138[0m | Dynamically generated MCP prompt string (length: 2085).
[32m2025-10-09 18:19:45[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.service_context[0m:[36m_init_mcp_components[0m:[36m141[0m | Dynamically formatted tools - OpenAI: 4, Claude: 4.
[32m2025-10-09 18:19:45[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36m__init__[0m:[36m41[0m | MCPC: Initialized MCPClient instance.
[32m2025-10-09 18:19:45[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36m_ensure_server_running_and_get_session[0m:[36m50[0m | MCPC: Starting and connecting to server 'time'...
[32m2025-10-09 18:19:45[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36m_ensure_server_running_and_get_session[0m:[36m75[0m | MCPC: Successfully connected to server 'time'.
[32m2025-10-09 18:19:45[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36m_ensure_server_running_and_get_session[0m:[36m50[0m | MCPC: Starting and connecting to server 'ddg-search'...
[32m2025-10-09 18:19:45[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36m_ensure_server_running_and_get_session[0m:[36m75[0m | MCPC: Successfully connected to server 'ddg-search'.
[10/09/25 18:19:45] INFO     Processing request of type            server.py:664
                             ListToolsRequest                                   
[32m2025-10-09 18:19:45[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36maclose[0m:[36m159[0m | MCPC: Closing client instance and 2 active connections...
[32m2025-10-09 18:19:45[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36maclose[0m:[36m166[0m | MCPC: Client instance closed.
[32m2025-10-09 18:19:45[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.tool_manager[0m:[36m__init__[0m:[36m28[0m | ToolManager initialized with 4 OpenAI tools and 4 Claude tools.
[32m2025-10-09 18:19:45[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.service_context[0m:[36m_init_mcp_components[0m:[36m155[0m | ToolManager initialized with dynamically fetched tools.
[32m2025-10-09 18:19:45[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.mcpp.mcp_client[0m:[36m__init__[0m:[36m41[0m | MCPC: Initialized MCPClient instance.
[32m2025-10-09 18:19:45[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.service_context[0m:[36m_init_mcp_components[0m:[36m170[0m | MCPClient initialized for this session.
[32m2025-10-09 18:19:45[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.service_context[0m:[36m_init_mcp_components[0m:[36m180[0m | ToolExecutor initialized for this session.
[32m2025-10-09 18:19:45[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.service_context[0m:[36m_init_mcp_components[0m:[36m187[0m | StreamJSONDetector initialized for this session.
[32m2025-10-09 18:19:45[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.websocket_handler[0m:[36mhandle_new_connection[0m:[36m126[0m | Connection established for client 4bbd974e-a775-45d2-ab15-cb53dc996e2e
[32m2025-10-09 18:19:45[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.agent.agents.basic_memory_agent[0m:[36mset_memory_from_history[0m:[36m193[0m | Loaded 0 messages from history.
INFO:     127.0.0.1:51034 - "GET /live2d-models/mao_pro/runtime/mao_pro.model3.json HTTP/1.1" 304 Not Modified
INFO:     127.0.0.1:51034 - "GET /live2d-models/mao_pro/runtime/mao_pro.moc3 HTTP/1.1" 304 Not Modified
INFO:     127.0.0.1:51034 - "GET /live2d-models/mao_pro/runtime/expressions/exp_02.exp3.json HTTP/1.1" 304 Not Modified
INFO:     127.0.0.1:51035 - "GET /live2d-models/mao_pro/runtime/expressions/exp_01.exp3.json HTTP/1.1" 304 Not Modified
INFO:     127.0.0.1:51037 - "GET /live2d-models/mao_pro/runtime/expressions/exp_04.exp3.json HTTP/1.1" 304 Not Modified
INFO:     127.0.0.1:51036 - "GET /live2d-models/mao_pro/runtime/expressions/exp_03.exp3.json HTTP/1.1" 304 Not Modified
INFO:     127.0.0.1:51038 - "GET /live2d-models/mao_pro/runtime/expressions/exp_05.exp3.json HTTP/1.1" 304 Not Modified
INFO:     127.0.0.1:51039 - "GET /live2d-models/mao_pro/runtime/expressions/exp_06.exp3.json HTTP/1.1" 304 Not Modified
INFO:     127.0.0.1:51035 - "GET /live2d-models/mao_pro/runtime/expressions/exp_08.exp3.json HTTP/1.1" 304 Not Modified
INFO:     127.0.0.1:51034 - "GET /live2d-models/mao_pro/runtime/expressions/exp_07.exp3.json HTTP/1.1" 304 Not Modified
INFO:     127.0.0.1:51034 - "GET /live2d-models/mao_pro/runtime/mao_pro.physics3.json HTTP/1.1" 304 Not Modified
INFO:     127.0.0.1:51034 - "GET /live2d-models/mao_pro/runtime/mao_pro.pose3.json HTTP/1.1" 304 Not Modified
INFO:     127.0.0.1:51034 - "GET /live2d-models/mao_pro/runtime/motions/mtn_02.motion3.json HTTP/1.1" 304 Not Modified
INFO:     127.0.0.1:51038 - "GET /live2d-models/mao_pro/runtime/motions/mtn_04.motion3.json HTTP/1.1" 304 Not Modified
INFO:     127.0.0.1:51035 - "GET /live2d-models/mao_pro/runtime/motions/special_02.motion3.json HTTP/1.1" 304 Not Modified
INFO:     127.0.0.1:51039 - "GET /live2d-models/mao_pro/runtime/motions/mtn_01.motion3.json HTTP/1.1" 304 Not Modified
INFO:     127.0.0.1:51037 - "GET /live2d-models/mao_pro/runtime/motions/special_03.motion3.json HTTP/1.1" 304 Not Modified
INFO:     127.0.0.1:51036 - "GET /live2d-models/mao_pro/runtime/motions/mtn_03.motion3.json HTTP/1.1" 304 Not Modified
INFO:     127.0.0.1:51034 - "GET /live2d-models/mao_pro/runtime/motions/special_01.motion3.json HTTP/1.1" 304 Not Modified
INFO:     127.0.0.1:51034 - "GET /live2d-models/mao_pro/runtime/mao_pro.4096/texture_00.png HTTP/1.1" 200 OK
[32m2025-10-09 18:21:16[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.websocket_handler[0m:[36mhandle_websocket_communication[0m:[36m234[0m | Client 4bbd974e-a775-45d2-ab15-cb53dc996e2e disconnected
[32m2025-10-09 18:21:16[0m | [1mINFO    [0m | [36msrc.open_llm_vtuber.websocket_handler[0m:[36mhandle_disconnect[0m:[36m316[0m | Client 4bbd974e-a775-45d2-ab15-cb53dc996e2e disconnected
INFO:     connection closed
